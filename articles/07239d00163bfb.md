---
title: "How to: ESP ZEROCODEで超お手軽にスマートホーム"
emoji: "🔥"
type: "tech"
topics:
  - "m5stack"
  - "esp32"
  - "matter"
published: true
published_at: "2025-03-02 16:05"
---

みんな、こんにちは！Matterって知っているかな？Matterは、スマートホームデバイスをつなげるための共通規格で、Apple、Google、Amazonをはじめとした200社以上が参加して策定されている規格だよ。例えばGoogle Homeに対応したデバイスって今まではAmazon Alexaとは繋がることはできなかったけど、Matterに対応することで異なるメーカーのデバイスでも簡単に連携できるようになるのが特徴だよ！

以前、ボクはESP32-C3を使ったMatterデバイスを作成する方法についてまとめたり、M5StackさんのNanoC6が発売された時にMatterに挑戦したりしていたよ。ただ、Matterを制御するコードって結構複雑だからボクは挫折しちゃって、みんなにはESP-Nowをオススメしているんだけど、今回、ESP ZEROCODEというEspressifさんのノーコードツールがESP32-C6に対応したから、ESP ZEROCODEとNanoC6を使ってMatterで制御できるカラフル照明を作る方法を紹介するよ。ノーコードで超お手軽にスマートホームデバイスを作れるから、みんなもぜひ作ってみてね！

https://zenn.dev/nananauno/articles/e27e830902a0ab

## 対象読者
- スマートホームデバイスを作ってみたい
- Matterに挫折した
- ESP ZEROCODEに興味がある

## やりたいこと
M5NanoC6とNeoPixel stripを使ってMatterで制御できるカラフルなスマートホーム照明を作るよ！作成したカラフル照明はAlexaで操作してみよう。

## 環境
- M5NanoC6（ESP32-C6搭載）
- NeoPixel（WS2812B）strip
- ESP ZEROCODE
- Echo dot（Matter対応）

https://ssci.to/9570

https://ssci.to/1593

今回はボクの手持ちのEcho dotをMatterのハブとして使用したけど、iOS18以降のiPhoneだとハブ無しでも接続できる（らしいけど、ボクは出来たことない）、他のGoogle HomeなどもOKだよ。

## Matterって？
Matterは、最初にもちょっと説明したけど、スマートホームデバイス向けの共通プロトコルだよ。Apple、Google、Amazonのような大手企業をはじめとした200社以上が参加して策定されている規格だよ。Matterが登場した理由は、これまでGoogle HomeとかAmazon Alexaのように各社で独自のスマートホームの仕組みがあって、それぞれは互換性が無くて相互に接続ができなかったんだけど、それだと消費者は不便だよね？ってことで、Matterという共通規格が登場したよ。Matterに対応することで、異なるメーカーのスマートホームデバイスを統一した規格で操作できるようになるよ！

https://csa-iot.org/all-solutions/matter/

ただ、Matter対応デバイスって名乗るにはCSAの認証が必要で、個人でMatterを謳ったデバイスを作るのはまだ難しい状況だね。ESP ZEROCODEを使用するデバイスの場合、CSAの無料会員になってCertification Transfer Program（既に認証済みの製品のリブランド）を使えるんだけど、それでも1製品ごとにUSD2,500の認証譲渡費用、USD500の年間リスティング費用がかかってくるから、現実的ではないよね。

## ESP ZEROCODEって？
ESP ZEROCODEは、Espressifさんが提供するノーコードツールで、ESP32シリーズを使ったIoTデバイスのプログラムを簡単に作成することができるよ。ウィザード形式になっていて、マウスでポチポチするだけでデバイスにファームを書き込んで動作確認まですることができるよ。あと、ESP ZEROCODEで作ったプログラムを書き込んだモジュールを量産用に注文することもできるみたいだよ。ただ、上で説明したように、Matterを謳ったデバイスを市場に投入するには認証が必要になってくるよ。

https://zerocode.espressif.com/

ESP ZEROCODEはこんな感じの画面で簡単にスマートホームデバイスを作成できるよ。
![ESP ZEROCODE](https://storage.googleapis.com/zenn-user-upload/cbdc4d9d7bcf-20250302.jpeg)

## カラフルなスマートホーム照明を作ってみよう
じゃあ、ここからは実際にESP ZEROCODEを使ってMatter対応のカラフルなスマートホーム照明を作っていくよ！

### 1. アカウントを作成
[ESP ZEROCODE](https://zerocode.espressif.com/)のサイトにアクセスして、アカウントの作成をしておいてね。それ以外は、ZEROCODEで準備することは特に無いよ。

### 2. NanoC6とNeoPixelの接続
M5StackさんのNanoC6にはGrove端子が1つ搭載されているから、Grove端子にNeoPixel stripを接続してね。ボクはAdafruitさんのNeoPixelリングにGrove端子を取り付けたものを接続したよ。WS2812Bなら何でも良いので、好きなNeiPixel stripを繋いでね。

| M5NanoC6 | NeoPixel |
|----------|---------|
| GND      | GND     |
| 5V       | VCC     |
| GPIO2    | DIN     |

### 3. デバイスを作成
ESP ZEROCODEでカラフルなスマートホーム照明を作る手順は以下の通りだよ。

1. Create a new productを選択
2. Get Startedで作りたいデバイスを選択
3. Select ModuleでESP32-C6-DevKitM-1を選択
4. Configure DeviceでNeoPixelのDINが繋がったGPIOとNeoPixelの数を指定
5. Test ProductでTest your product nowを選択してファームを書き込み

たぶん説明しなくても大丈夫だけど、各ステップについて少しだけ詳しく説明するよ。

**Get Started**
Get Startedの画面では作成できるスマートホームデバイスの一覧が表示されるよ。色んな種類のデバイスが作成できそうだけど、今回はNeoPixelを使用したカラフル照明だからLED stripというデバイスを探して選択してね。

左側のフィルターでDriverのWS2812にチェックすると探しやすいよ。

![](https://storage.googleapis.com/zenn-user-upload/c01cc005be08-20250302.png)

**Select Module**
Select Moduleの画面では使用するESP32のモジュール一覧が表示されるよ。今回はESP32-C6を搭載したNanoC6を使用するから、ESP32-C6を開いてね。DevkitsとModulesが表示されると思うけど、**ESP32-C6-DevKitM-1**を選択してね。

![](https://storage.googleapis.com/zenn-user-upload/f20dbd314723-20250302.png)

**Configure Device**
Configure Deviceの画面では、ESP32のモジュールと最初に選択したデバイスがどのように接続されているかがグラフィカルに表示されているよ。今回はLED stripしか選択していないから、LEDが1つESP32のモジュールに接続された画像が表示されているはずだよ。

画像の下にLEDの設定があるから、ここの設定をお手元の構成に合わせて設定してね。ボクの場合はNeoPixel stripのDINをGPIO2に接続して、NeoPixelの数は12個だから、以下のように設定したよ。
- IO pin: GPIO 2
- Number of LEDs: 12

![](https://storage.googleapis.com/zenn-user-upload/d31b4d688f1e-20250302.png)

**Test Product**
ここまでで今回作成したいカラフル照明の設定は完了だよ。あとは、ファームが自動的に作成されるから、それをNanoC6に書き込むだけ。ESP ZEROCODEは作成されたファームの書き込みもブラウザで完結できるからとっても便利だね。

![](https://storage.googleapis.com/zenn-user-upload/e14e5f31c29c-20250302.png)
この画面が表示されたらNanoC6をPCに接続して、Connect your device to get startedを選択するとシリアルポートの選択画面が表示されるから、NanoC6のポートを選択してね。あとは自動的にファームの書き込みをやってくれるよ。

![](https://storage.googleapis.com/zenn-user-upload/b0015f060ca4-20250302.png)
接続ができればあとはファームの書き込み完了を待つだけ！書き込みが完了するとMatterのQRコードが表示されるよ。

## 動作確認
ファームの書き込みが完了して最後にMatterのQRコードが表示されたら準備完了。あとは、Amazon Echo dotなどとペアリングして操作できる状態にするだけだよ。

1. Echo dotと接続
   - Amazon Alexaアプリから作成したデバイスを追加
 ボクが確認したときは、追加ボタンを押さなくてもアプリを開くと自動的に新しいデバイスが検出されていて、そのままペアリングに進めたよ。
   - M5NanoC6のQRコードをスキャンしてペアリング
   
2. Alexaアプリや音声で操作！
   - Alexaアプリでカラフル照明をON/OFFしたり色を変えられることを確認
   - 「アレクサ、＜デバイス名＞を青にして！」
   - 「アレクサ、＜デバイス名＞のライトを消して！」

正しくEcho dotとペアリングできていると、こんな感じでカラフル照明を操作できるはずだよ！
https://x.com/nananauno/status/1896077523320279497

## まとめ
今回はEspressifさんのESP ZEROCODEを使うことで、ノーコードでMatter対応のカラフルなスマートホーム照明を作成する方法を紹介したよ。ESP ZEROCODEを使うと、超簡単にMatterデバイスを作成できることが分かったよね？

Matterの認証取得は個人で行うにはハードルが高いけど、お家で個人的に使ったり、プロトタイピングしたりするだけなら、ESP ZEROCODを使うことで簡単にMatterデバイスを作成できるところは魅力的だよね。個人での認証は難しいけど、ハードウェアスタートアップ以上であれば、お手軽にMatterデバイスをローンチすることもできるかもしれないね。

今回はカラフル照明を作ったけど、ESP ZEROCODEでは他にもスイッチとか調光機とかいくつか選べるデバイスがあるから、他のデバイスもぜひ試してみてね。

じゃあ、またね！